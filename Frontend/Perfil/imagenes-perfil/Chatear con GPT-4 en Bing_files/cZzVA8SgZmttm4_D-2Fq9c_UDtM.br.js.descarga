var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},GlobalActionMenuV2Wrapper;(function(){function li(n,t){n&&t&&yi(n,t)}function ft(n,t){n&&t&&(tr(n,t),t.ElementToBindHoverEvent&&ir(n,t.ElementToBindHoverEvent),t.ElementForScreenshot&&rr(n,t.ElementForScreenshot),t.CustomizedLoadingStatus==="Complete"&&st(n),sr()&&t.ElementForPreview&&ur(n,t.ElementForPreview),r(n,"UpdateShareCommonControl"))}function et(i,u){var f,e,o,s,h;i&&i.getAttribute(k)!=="1"&&(f=t(i),f)&&(n[f]=n[f]||{},u&&u.ElementToBindHoverEvent?n[f].ElementToBindHoverEvent=u.ElementToBindHoverEvent:(e=i.getAttribute(b),e&&(o=_d.getElementById(e),o&&(n[f].ElementToBindHoverEvent=o))),u&&u.ElementForScreenshot?n[f].ElementForScreenshot=u.ElementForScreenshot:(s=i.getAttribute(l),s&&(h=_d.getElementById(s),h&&(n[f].ElementForScreenshot=h))),pi(i),sj_evt.fire("GlobalActionMenuV2Wrapper.InitShareActions",i),r(i,"InitShareCommonControl"),i.setAttribute(k,"1"))}function ai(n,i,r){if(n&&i){var u=t(n);u&&(r&&ft(n,r),o(n,i,r))}}function vi(n){n&&s(n)}function yi(n,t){var f,e,i,u,o;if(n&&t&&typeof sj_ajax!="undefined"&&sj_ajax){hr()&&(f=["mousewheel","touchstart","touchmove","touchend"],f.forEach(function(t){n.addEventListener(t,function(n){n.stopPropagation()})}));e=t.ScenarioNameUsedForLog?t.ScenarioNameUsedForLog:"Default_Default";r(e,"RenderShareCommonControl");i="";for(u in t)(typeof t[u]=="string"||typeof t[u]=="boolean")&&(i+="".concat(u,"=").concat(encodeURIComponent(t[u]),"&"));i&&(i="?"+i);o="/sharing/getsharecommoncontrol"+i;sj_ajax(o,{callback:function(i,u){if(i&&u){u.appendTo(n);var f=void 0,e=u.request.responseText.match(/data-menuid=(\"|\')([^\s\"\']+)(\"|\')/),o=(e===null||e===void 0?void 0:e.length)>=4?e[2]:"";if(!o)return;if(f=n.querySelector("span[".concat(a,'="').concat(o,'"]')),!f)return;r(f,"RenderShareCommonControlSuccess");et(f,t)}}})}}function pi(i){var r=t(i);r&&(wi(i),(er(i)||n[r].ElementToBindHoverEvent)&&(ki(i),nr(i)))}function wi(n){var t=i(n);sj_be(t,"keydown",function(t){return bi(t,n)})}function bi(n,t){var f,e,r,u,o,h,s;n&&n.key==="Tab"&&(r=document.activeElement,r&&r.nodeName==="CIB-SERP"&&(r=(f=r===null||r===void 0?void 0:r.shadowRoot)===null||f===void 0?void 0:f.activeElement,r&&r.nodeName==="CIB-HOVER"&&(r=(e=r===null||r===void 0?void 0:r.shadowRoot)===null||e===void 0?void 0:e.activeElement)),u=i(t),(u===null||u===void 0?void 0:u.contains(r))&&(o=t.querySelectorAll("[tabindex='0']"),h=o[o.length-1],r.isEqualNode(h)&&(s=ct(t),s&&(s.focus(),n.preventDefault()))))}function ki(i){var f=t(i),r,e,s,u;f&&(r=y(i),r&&(sj_be(r,"click",function(){return o(i,r)}),AccessibilityHelpers.activateButtonByKey(r,[13,32],function(){return o(i,r)})),e=Lib.CssClass.contains(i,gt),s=!e,s&&(u=n[f].ElementToBindHoverEvent,u||(u=r),ot(i,u)))}function ot(i,r){var f,u,e,s;i&&r&&(f=t(i),f)&&(e=function(){u&&clearTimeout(u);u=setTimeout(function(){return o(i,r)},500)},s=function(){u&&(clearTimeout(u),u=null)},sj_be(r,"mouseenter",e),sj_be(r,"mouseleave",s),n[f].onMouseEnter=e,n[f].onMouseLeave=s)}function o(n,t,r){var u=i(n),s=Lib.CssClass.contains(t,h),o=Lib.CssClass.contains(u,f),l=!o&&Lib.CssClass.contains(u,c),a=o||l!=s;a&&(sj_evt.fire(e),di(n,t),(r===null||r===void 0?void 0:r.CustomizedLoadingStatus)!=="Loading"&&st(n))}function di(n,t){var u=i(n),v,s,o,e,y,l,a;if(u){for(Lib.CssClass.add(n,w),v=Lib.CssClass.contains(t,h),v&&Lib.CssClass.add(u,c),Lib.CssClass.remove(u,p),Lib.CssClass.remove(u,f),s=u.getElementsByClassName(yt),o=0;o<s.length;o++)e=s[o],Lib.CssClass.remove(e,wt),Lib.CssClass.remove(e,bt),Lib.CssClass.add(e,pt),y=e.getElementsByClassName(dt),l=y[0],l&&(l.innerText="");gi(n,t,ci);a=ct(n);a&&a.focus();r(n,"OpenMenu");sj_evt.fire("GlobalActionMenuV2Wrapper:ActionMenuContentOpened",n)}}function gi(n,t,r){var u;if(n&&t&&n.getAttribute("data-disposamc")!=="true"&&(u=i(n),u)){var v=t.getBoundingClientRect(),o=t.offsetWidth?t.offsetWidth:0,s=t.offsetHeight?t.offsetHeight:0,e=v.left,h=_w.innerWidth-e-o,c=v.top,y=_w.innerHeight-c-s;u.style.position="fixed";e>h?e+o<r?(u.style.left="0",u.style.right=""):(u.style.left="",u.style.right=h+"px"):h+o<r?(u.style.left="",u.style.right="0"):(u.style.left=e+"px",u.style.right="");c>y?(u.style.top="",u.style.bottom=y+s+"px"):(u.style.top=c+s+"px",u.style.bottom="");var p=n.getBoundingClientRect(),f=u.getBoundingClientRect(),l=f.left-p.left,w=f.left,a=f.top-p.top,b=f.top;u.style.position="absolute";u.style.left=l+"px";u.style.top=a+"px";u.style.right="";u.style.bottom="";f=u.getBoundingClientRect();l+=w-f.left;a+=b-f.top;u.style.left=l+"px";u.style.top=a+"px"}}function st(i){var r,u=t(i);u&&(((r=n[u])===null||r===void 0?void 0:r.ElementForScreenshot)||i.getAttribute(l)||i.getAttribute(d)?setTimeout(function(){var t;return sj_evt.fire(hi,i,(t=n[u])===null||t===void 0?void 0:t.ElementForScreenshot)},window.domtoimage?50:300):(sj_evt.fire("GlobalActionMenuV2Wrapper:ScreenshotSkipped",i),ht(i)))}function nr(n){var t,r;sj_evt.bind(e,function(){return s(n)});sj_be(_d,"touchstart",function(){return sj_evt.fire(e)});sj_be(_d,"click",function(){return sj_evt.fire(e)});t=y(n);t&&(sj_be(t,"touchstart",function(n){return n.stopPropagation()}),sj_be(t,"click",function(n){return n.stopPropagation()}),AccessibilityHelpers.activateButtonByKey(t,[27],function(){return s(n)}));r=i(n);sj_be(r,"touchstart",function(n){return n.stopPropagation()});sj_be(r,"click",function(n){return n.stopPropagation()});AccessibilityHelpers.activateButtonByKey(r,[27],function(){return s(n)})}function s(n){var o,t=i(n),s,u,e,h;t&&!Lib.CssClass.contains(t,f)&&(sj_evt.fire("GlobalActionMenuV2Wrapper.ResetScreenshot",n,t),Lib.CssClass.add(t,f),Lib.CssClass.add(t,p),Lib.CssClass.remove(t,c),Lib.CssClass.remove(n,w),s=(o=n.getElementsByClassName("share-message-preview"))===null||o===void 0?void 0:o[0],s&&(s.innerHTML=""),u=n.querySelector(nt),e=n.querySelector(tt),e===null||e===void 0?void 0:e.classList.remove(it),u===null||u===void 0?void 0:u.classList.add(rt),h=y(n),h&&h.focus(),r(n,"CloseMenu"),sj_evt.fire("GlobalActionMenuV2Wrapper:ActionMenuContentClosed",n))}function ht(n){if(n){var u=n.querySelector(v),t=n.querySelector(nt),i=n.querySelector(tt);t&&i&&u&&(i.classList.add(it),t.classList.remove(rt),r(n,"dismissLoadingMask"),sj_evt.fire("GlobalActionMenuV2Wrapper:LoadingUIDismissed",n))}}function tr(n,t){var i,u,r;t.ScreenshotThumbnailId&&n.setAttribute(d,t.ScreenshotThumbnailId);t.DisplayMode&&n.setAttribute(ii,t.DisplayMode);i=fr(n);i&&(t.CustomizedTitle&&t.ShareDataSafetyHash&&(u=n.getElementsByClassName(kt),r=u[0],r&&(r.innerText=t.CustomizedTitle),i.setAttribute(ei,t.CustomizedTitle)),t.CustomizedContent&&t.ShareDataSafetyHash&&(i.setAttribute(ri,t.CustomizedContent),i.setAttribute(fi,t.CustomizedContent),i.setAttribute(oi,t.CustomizedContent)),t.ShareDataSafetyHash&&i.setAttribute(ui,t.ShareDataSafetyHash),t.UrlOverride&&i.setAttribute(si,t.UrlOverride))}function ir(i,r){var e,o,s,u,l,f,h,c;i&&r&&(u=t(i),u)&&(l=i.getAttribute(b),l)&&(f=(e=n[u])===null||e===void 0?void 0:e.ElementToBindHoverEvent,f)&&(h=(o=n[u])===null||o===void 0?void 0:o.onMouseEnter,h&&(sj_ue(f,"mouseenter",h),n[u].onMouseEnter=null),c=(s=n[u])===null||s===void 0?void 0:s.onMouseLeave,c&&(sj_ue(f,"mouseenter",c),n[u].onMouseLeave=null),n[u].ElementToBindHoverEvent=r,ot(i,r))}function rr(i,r){var u,f;i&&r&&(u=t(i),u)&&(f=i.getAttribute(l),f)&&(n[u].ElementForScreenshot=r)}function ur(n,t){var r,i=(r=n.getElementsByClassName("share-message-preview"))===null||r===void 0?void 0:r[0],u;i&&t&&(u=i.firstChild,u?i.replaceChild(t,u):i.appendChild(t))}function fr(n){if(n!==null&&n!==void 0)return n.querySelector("."+ni)}function ct(n){if(n!==null&&n!==void 0)return n.querySelector("."+vt)}function i(n){if(n!==null&&n!==void 0)return n.querySelector("."+at)}function y(n){if(n!==null&&n!==void 0)return n.querySelector("."+h)}function er(n){if(n!==null&&n!==void 0)return n.querySelector("."+ti)}function t(n){return(n===null||n===void 0?void 0:n.getAttribute(a))||""}function r(n,t,i,r){var o=typeof n=="string"?n:n===null||n===void 0?void 0:n.getAttribute("data-scenario"),u,s,c,h,e,f,l;if(Log&&Log.Log&&o){if(t="GAMV2."+t,u=["Namespace",or(o),"Scenario",o],i&&(u.push("ShareType"),u.push(i)),r)for(f in r)r.hasOwnProperty(f)&&r[f]&&(u.push(f),u.push(r[f]));if(s=o.indexOf("Codex_")===0?"Codex":"CI",s==="Codex"){for(c=["Namespace"],h={},e=0;e<u.length&&e+1<u.length;e+=2)f=u[e],l=u[e+1],c.indexOf(f)===-1&&(h[f]=l);u.push("CustomData");u.push(JSON.stringify(h))}Log.Log.apply(Log,__spreadArray(["SystemEvent",s,t,!1],u,!1))}}function or(n){switch(n){case"Vertical_RealEstate":return"Vertical_RealEstate";case"Codex_ConversationMode":return"Conversation";case"Codex_SemanticSerp":return"RightRail";case"Codex_CreatorMode":return"Creator";case"Codex_Others":return"Codex_Others";default:return"Others"}}function sr(){return typeof _G!="undefined"&&_G.EF!==undefined&&_G.EF.sharepreview!==undefined&&_G.EF.sharepreview===1}function hr(){return typeof _G!="undefined"&&_G.EF!==undefined&&_G.EF.sharestopscroll!==undefined&&_G.EF.sharestopscroll===1}var lt=this,at="actionmenucontent",vt="shareheader_label",yt="ga_cpy_block",pt="ga_cpy_block_step0",wt="ga_cpy_block_step1",bt="ga_cpy_block_step2",kt="ga_cpy_title_step0",dt="ga_cpy_title_step1",f="hiddenmenu",gt="actionmenumobile",p="nonemenu",w="openmenu",ni="b_sharedata",h="shareactionexp",c="sharemenu",ti="topactions",ii="data-displaymode",l="data-screenshotid",b="data-hoverid",k="data-initialized",a="data-menuid",d="data-thumbnailid",ri="data-sd",ui="data-ht",fi="data-im",ei="data-st",oi="data-tt",si="data-uo",g="GlobalActionMenuV2Wrapper.Binded",e="largeMenuDismiss",hi="GlobalActionMenuV2Wrapper.Screenshot",u="GlobalActionMenuV2Wrapper.Trigger",v=".share-content-container",nt="".concat(v," > :first-child"),tt="".concat(v," > :last-child"),it="display-none",rt="content-disabled",ci=430,ut=!1,n={};sj_evt.bind(g,function(){ut=!0},!0);ut||(sj_evt.fire(g),sj_evt.bind("GlobalActionMenuV2Wrapper.Create",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return li(t,i)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.Update",function(n){var t=n[1],i=n[2];sj_evt.bind(u,function(){return ft(t,i)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.Init",function(n){var t,i;typeof n[1]=="string"?(i=n[1],t=_d.querySelector("span[".concat(a,'="').concat(i,'"]'))):t=n[1];sj_evt.bind(u,function(){return et(t)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.ShowActionMenuContent",function(n){var t=n[1],i=n[2],r=n[3];sj_evt.bind(u,function(){return ai(t,i,r)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper.HideActionMenuContent",function(n){var t=n[1];sj_evt.bind(u,function(){return vi(t)},!0)},!0),sj_evt.bind("GlobalActionMenuV2Wrapper:ScreenshotCompleted",function(n){return __awaiter(lt,void 0,void 0,function(){var t;return __generator(this,function(){return(t=n[1],!t)?[2]:(ht(t),[2])})})},!0))})(GlobalActionMenuV2Wrapper||(GlobalActionMenuV2Wrapper={}))