var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},SydneyFullScreenConv;(function(n){function cr(i){var u,c,v,y,b,k,nt,tt,it,et,ot,ht,vt,bt,ni,ri,ui,fi,li,cr,ar,yr,pr,wr,dr,tu,iu,eu,su,hu,cu,lu,au,vu,yu,pu,wu,bu,uf,ef,hf,cf,lf,af,vf,yf,pf,wf,bf,kf,df,gf,ne,te,ie,re,ue,fe,ee,oe,se,he,ce,le,ae,ve,ye;return i===void 0&&(i=null),__awaiter(this,void 0,void 0,function(){var pe,co,lo,ao,is,rs,no,ge,vo,to,io,yo,ro,uo,fo,po,wo,bo,ko,go,eo,ns,oo,we,ke,be,so,ho,de,ts;return __generator(this,function(us){switch(us.label){case 0:if(pe=_ge(br),pe.querySelector("cib-serp"))return[2];if(kt=(u=_w._sydConvConfig)===null||u===void 0?void 0:u.usePill,rt=(c=_w._sydConvConfig)===null||c===void 0?void 0:c.enableScrollOut,dt=(v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableSydContext,o=(y=_w._sydConvConfig)===null||y===void 0?void 0:y.convBackBtn,ut=(b=_w._sydConvConfig)===null||b===void 0?void 0:b.enableSetConvQueryFlag,ru=(k=_w._sydConvConfig)===null||k===void 0?void 0:k.enableSydTigerAns,ei=(nt=_w._sydConvConfig)===null||nt===void 0?void 0:nt.enableSydAjax,st=(tt=_w._sydConvConfig)===null||tt===void 0?void 0:tt.enableSydCarousel,n.moveOnlySydXAnswers=(it=_w._sydConvConfig)===null||it===void 0?void 0:it.moveOnlySydXAnswers,s=(et=_w._sydConvConfig)===null||et===void 0?void 0:et.hideSydFSC,h=(ot=_w._sydConvConfig)===null||ot===void 0?void 0:ot.enableSydOverlay,gt=(ht=_w._sydConvConfig)===null||ht===void 0?void 0:ht.enable1TCibSlot,d=(vt=_w._sydConvConfig)===null||vt===void 0?void 0:vt.enableSydX1T,oi=(bt=_w._sydConvConfig)===null||bt===void 0?void 0:bt.hideSydMic,si=(ni=_w._sydConvConfig)===null||ni===void 0?void 0:ni.fromNoResults,pi=(ri=_w._sydConvConfig)===null||ri===void 0?void 0:ri.codexWinEnableCustomGreeting,wi=(ui=_w._sydConvConfig)===null||ui===void 0?void 0:ui.codexWinGreetingCustomString,ai=(fi=_w._sydConvConfig)===null||fi===void 0?void 0:fi.checkCreatorAnsFor1T,hi=SydFSCHelper.getConfigOrDefault((li=_w._sydConvConfig)===null||li===void 0?void 0:li.enableSydCarouselHistory,!1),uu=SydFSCHelper.getConfigOrDefault((cr=_w._sydConvConfig)===null||cr===void 0?void 0:cr.enableSQMsg,!1),ci=SydFSCHelper.getConfigOrDefault((ar=_w._sydConvConfig)===null||ar===void 0?void 0:ar.enableSemSerpNoCache,!1),vi=SydFSCHelper.getConfigOrDefault((yr=_w._sydConvConfig)===null||yr===void 0?void 0:yr.enableSydStaticAdsLink,!1),co=SydFSCHelper.getConfigOrDefault((pr=_w._sydConvConfig)===null||pr===void 0?void 0:pr.hideSydReconnect,!1),lo=(wr=_w._sydConvConfig)===null||wr===void 0?void 0:wr.enableDlBing,ao=(dr=_w._sydConvConfig)===null||dr===void 0?void 0:dr.disableSydGhosting,is=SydFSCHelper.getConfigOrDefault((tu=_w._sydConvConfig)===null||tu===void 0?void 0:tu.disableCibNotificationStyleUpdate,!1),rs=_w._sydCachedString,no=_w._sydAddOptionsSet,_G[SydFSCHelper.SYD_MODE]="serp",_G[SydFSCHelper.SYD_PREV_MODE]="",ct=SydFSCHelper.getConfigOrDefault((iu=_w._sydConvConfig)===null||iu===void 0?void 0:iu.disableTabletScroll,!1),lt=SydFSCHelper.getConfigOrDefault((eu=_w._sydConvConfig)===null||eu===void 0?void 0:eu.disableTouchDesktopScroll,!1),at=SydFSCHelper.getConfigOrDefault((su=_w._sydConvConfig)===null||su===void 0?void 0:su.disableDesktopScroll,!1),yi=SydFSCHelper.getConfigOrDefault((hu=_w._sydConvConfig)===null||hu===void 0?void 0:hu.enableChatScrollFix,!1),yt=SydFSCHelper.getConfigOrDefault((cu=_w._sydConvConfig)===null||cu===void 0?void 0:cu.enableConvModeSwitchAjax,!1),bi=SydFSCHelper.getConfigOrDefault((lu=_w._sydConvConfig)===null||lu===void 0?void 0:lu.enableCssSplitConvModeOnClick,0),wt=SydFSCHelper.getConfigOrDefault((au=_w._sydConvConfig)===null||au===void 0?void 0:au.chatBackgroundColorOverride,""),ti=SydFSCHelper.getConfigOrDefault((vu=_w._sydConvConfig)===null||vu===void 0?void 0:vu.enableWelcomeScreenV2,!1),ii=SydFSCHelper.getConfigOrDefault((yu=_w._sydConvConfig)===null||yu===void 0?void 0:yu.enableChatFRE,!1),ki=SydFSCHelper.getConfigOrDefault((pu=_w._sydConvConfig)===null||pu===void 0?void 0:pu.enable2TQueryConfigsOnSerpLoad,!1),di=SydFSCHelper.getConfigOrDefault((wu=_w._sydConvConfig)===null||wu===void 0?void 0:wu.enableBackgroundFix,!1),gi=SydFSCHelper.getConfigOrDefault((bu=_w._sydConvConfig)===null||bu===void 0?void 0:bu.hideMuidUpsell,!1),nr=SydFSCHelper.getConfigOrDefault((uf=_w._sydConvConfig)===null||uf===void 0?void 0:uf.enableSERPHideShowConv,!1),tr=SydFSCHelper.getConfigOrDefault((ef=_w._sydConvConfig)===null||ef===void 0?void 0:ef.enableBceBcbToggle,!1),f=SydFSCHelper.getConfigOrDefault((hf=_w._sydConvConfig)===null||hf===void 0?void 0:hf.enableNotebookMode,!1),ir=SydFSCHelper.getConfigOrDefault((cf=_w._sydConvConfig)===null||cf===void 0?void 0:cf.extraNotebookOptionsSets,""),ur=SydFSCHelper.getConfigOrDefault((lf=_w._sydConvConfig)===null||lf===void 0?void 0:lf.maxMessageLength,gr),fr=SydFSCHelper.getConfigOrDefault((af=_w._sydConvConfig)===null||af===void 0?void 0:af.notebookMaxMessageLength,nu),er=SydFSCHelper.getConfigOrDefault((vf=_w._sydConvConfig)===null||vf===void 0?void 0:vf.enableSydTestCache,!1),g=SydFSCHelper.getConfigOrDefault((yf=_w._sydConvConfig)===null||yf===void 0?void 0:yf.enableChatContAfterHeader,!1),or=SydFSCHelper.getConfigOrDefault((pf=_w._sydConvConfig)===null||pf===void 0?void 0:pf.enableSafeChatAnsStyle,!1),ge=SydFSCHelper.getConfigOrDefault((wf=_w._sydConvConfig)===null||wf===void 0?void 0:wf.isCopilotChat,!1),vo=SydFSCHelper.getConfigOrDefault((bf=_w._sydConvConfig)===null||bf===void 0?void 0:bf.enableCopilotChatIdentityDisplay,!1),sr=SydFSCHelper.getConfigOrDefault((kf=_w._sydConvConfig)===null||kf===void 0?void 0:kf.isMobileHost,!1)&&ge,hr=SydFSCHelper.getConfigOrDefault((df=_w._sydConvConfig)===null||df===void 0?void 0:df.enableFakeScrollTelemetry,!1),fu=SydFSCHelper.getConfigOrDefault((gf=_w._sydConvConfig)===null||gf===void 0?void 0:gf.enableSearchQueryTelemetryFix,!1),p=_d.createElement("slot"),p.setAttribute("name","firstAnswer"),p.setAttribute("slot","firstAns"),w=_d.createElement("slot"),w.setAttribute("name","firstAns"),e=((ne=_d.getElementsByClassName("b_top"))===null||ne===void 0?void 0:ne.length)>0?_d.getElementsByClassName("b_top")[0]:null,ft=!e?!1:e.getElementsByClassName("b_wpt_ch").length>0||e.getElementsByClassName("qna-sydney").length>0,g?pe&&Lib.CssClass.add(sj_b,kr):(to=_ge("b_header"),pe&&to&&sj_b.insertBefore(pe,to)),t=_d.createElement("div"),t===null||t===void 0?void 0:t.setAttribute("slot","firstAnswer"),t===null||t===void 0?void 0:t.setAttribute("id","sydFirstAnswer"),t.style.maxWidth="648px",SydFSCHelper.setConfigs(i),SydFSCHelper.setEventListeners(),SydFSCHelper.setSydFSCEligibleState(!0),io=SydFSCHelper.getConfigOrDefault((te=_w._sydConvConfig)===null||te===void 0?void 0:te.isCompliantSydneyEndpointEnabled,!1),io&&MsbSydneyHelper.setCompliantSydneyUrls(),ge?(CIB.manager.chat.api.bing._endpoint=window.document.location.origin,yo=sj_ce("div"),r=CIB.insertAt(yo),CIB.showConversation(),pe.appendChild(r)):r=CIB.insertAt(pe),vo&&(ro=_ge("id_l"),ro&&(ro.style.display="inline-block")),SydFSCHelper.setColorScheme(),uo=SydFSCHelper.getConfigOrDefault((ie=_w._sydConvConfig)===null||ie===void 0?void 0:ie.isBingChatForEnterprise,!1),fo=SydFSCHelper.getConfigOrDefault((re=_w._sydConvConfig)===null||re===void 0?void 0:re.enableBCEDynamicPrompts,!1),po=SydFSCHelper.getConfigOrDefault((ue=_w._sydConvConfig)===null||ue===void 0?void 0:ue.enableThreads,!1),wo=uo&&!fo&&typeof BceSydneyHelper!="undefined"?BceSydneyHelper.getSydneyWelcomeCards:undefined,bo=uo&&fo&&typeof BceSydneyHelper!="undefined"?BceSydneyHelper.getFallBackTilesForBCE:undefined,wt&&CIB.theme.addStyles("cib-background",CIB.theme.createStyles(':host([product="bing"][background-type="gradient"]) { background: #'+wt+" !important;}")),ti?sj_evt.bind("sydWelcomeScreen",function(){SydWelcomeScreen===null||SydWelcomeScreen===void 0?void 0:SydWelcomeScreen.setContent(r,wo,bo)},!0):ii&&(SydneyChatFRE===null||SydneyChatFRE===void 0?void 0:SydneyChatFRE.setContent(r)),io&&MsbSydneyHelper.addTenantLogoToHeader(),ko=SydFSCHelper.getConfigOrDefault((fe=_w._sydConvConfig)===null||fe===void 0?void 0:fe.useAccountLinkingForConversationLimitUpsell,!1),ko&&(CIB.config.bing.signIn.query.action="acclink",CIB.config.bing.signIn.query.crea="MY04B",CIB.config.bing.signIn.query.pn="AccountLinking_Chat",CIB.config.bing.signIn.query.publ="BingIP"),r.setAttribute("alignment",ge&&!po?"center":"left"),lo&&CIB.config.sydney.request.optionsSets.push("dlbing"),no&&CIB.config.sydney.request.optionsSets.push(no),f&&(pt=(ee=CIB.config.sydney.request.optionsSets)===null||ee===void 0?void 0:ee.slice(0),rr=ir.split(",")),si)SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim();else{CIB.config.greeting.shouldSendBotGreeting=SydFSCHelper.shouldForceSendBotGreeting;yt||(sj_evt.bind("ajax.unload",function(){SydFSCHelper.shouldResetBotGreeting=!1}),sj_evt.bind("ajax.load",function(){SydFSCHelper.shouldResetBotGreeting=!0}));CIB.onConversationRequestStateChange(function(n){n||CIB.config.greeting.shouldSendBotGreeting||!SydFSCHelper.shouldResetBotGreeting||(CIB.config.greeting.shouldSendBotGreeting=!0)})}return(yt&&sj_evt.bind("ajax.load",function(){_G[SydFSCHelper.SYD_MODE]="serp"}),go=SydFSCHelper.getConfigOrDefault((oe=_w._sydConvConfig)===null||oe===void 0?void 0:oe.disResetTT,!1),go&&(eo=(he=(se=r===null||r===void 0?void 0:r.shadowRoot)===null||se===void 0?void 0:se.querySelector("cib-action-bar"))===null||he===void 0?void 0:he.shadowRoot,eo&&(be=sj_ce("style"),be.textContent="\n                    cib-tooltip {\n                        display: none !important;\n                    }\n                ",eo.appendChild(be))),!(er&&"SydneyTestHelper"in _w))?[3,2]:[4,SydneyTestHelper===null||SydneyTestHelper===void 0?void 0:SydneyTestHelper.setTestMocks()];case 1:us.sent();us.label=2;case 2:hi&&(ns=new URLSearchParams(_w.location.search),oo=ns.get("convid"),oo&&sf(oo));we=(ce=_d.querySelector("cib-serp"))===null||ce===void 0?void 0:ce.shadowRoot;ke=we===null||we===void 0?void 0:we.querySelector("cib-conversation");ke&&ke.shadowRoot&&(l=ke.shadowRoot.querySelector(".scroller"),be=sj_ce("style"),co&&(be.textContent="\n                cib-notification-container {\n                    display: none;\n                }\n            "),ke.shadowRoot.appendChild(be));ao&&(so=(ae=(le=we===null||we===void 0?void 0:we.querySelector("cib-action-bar"))===null||le===void 0?void 0:le.shadowRoot)===null||ae===void 0?void 0:ae.querySelector(".autosuggest-text"),so&&(so.style.display="none"));ho="ontouchstart"in window||!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0;ct&&Log.Log("ClientInst","Codex","TabletScrollDisabled");ho&&Log.Log("ClientInst","Codex","TouchD");lt&&Log.Log("ClientInst","Codex","TouchDesktopScrollDisabled");h||ct||ho&&lt||(sj_be(_w,"mousewheel",gu),sj_be(_w,"touchstart",nf),sj_be(_w,"touchmove",tf),sj_be(_w,"touchend",rf),Log.Log("ClientInst","Codex","BindedScrollEvents"),yi&&(de=(ve=_d.querySelector("cib-serp"))===null||ve===void 0?void 0:ve.shadowRoot.querySelector("cib-side-panel"),de&&sj_be(de,"mouseenter",ku),de&&sj_be(de,"mouseleave",du)));SydFSCHelper.triggerShareFlow();lr();sj_evt.bind("ajax.load",lr);o&&(SydFSCHelper.setupHistory(),SydFSCHelper.checkInitialState());ou();h&&ff();SydFSCHelper.triggerClarity();CIB.onResetConversation(function(){SydFSCHelper.shouldMove1TAnswers(d,a)&&vr()});CIB.onModeChanged(function(n){sj_evt.fire("onModeChanged",n)});if(CIB.onMobileUpsellPopupShown)CIB.onMobileUpsellPopupShown(function(){var n={convId:CIB.manager.conversation.id,responseTone:CIB.responseTone};SydFSCHelper.SydLog("SystemEvent","MobileUpsell","MobileUpsellPopupShown",n);SydFSCHelper.createRequest("sydchat/writeConvInfo",JSON.stringify(n))});return ts=((ye=_w.BingChatCustomGreetingString)===null||ye===void 0?void 0:ye.length)>0,pi&&!ts&&SydFSCHelper.processCachedResponseUsingCIB(JSON.parse(wi)),di&&SydFSCHelper.updateChatBackgroundWidth(),gi&&SydFSCHelper.hideSignInUpsellFor3P(),sr&&SydFSCHelper.hideTopFade(),[2]}})})}function eu(){var n=_ge("b_content");sb_st(function(){n&&Lib.CssClass.contains(n,"b_showconv")&&Lib.CssClass.remove(n,"b_showconv")},0)}function lr(){sj_evt.bind("hideSydFSC",function(n){var k,nt,v,i,r,y,tt,u,e,t,l,b;if(!ot){if(ot=!0,Log.Log("ClientInst","Codex","LeaveConversationMode"),s||Lib.CssClass.remove(sj_b,c),g&&sb_st(function(){if(!Lib.CssClass.contains(sj_b,c)){var n=_ge("b_header"),t=_d.querySelector(".b_scopebar");t&&(n===null||n===void 0?void 0:n.insertBefore(t,ui))}},1e3),v=_ge("sb_form"),v&&Lib.CssClass.contains(v,"hassbi")&&Lib.CssClass.remove(v,"hassbi"),CIB.hideConversation(),s||h||(Lib.CssClass.add(_d.documentElement,"b_delayOvflw"),SydFSCHelper.shouldMove1TAnswers(d,a)&&vr(),i=_ge("b-scopeListItem-web"),i&&i.children.length>0&&(i.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(i,"b_active"),((k=_G===null||_G===void 0?void 0:_G.EF)===null||k===void 0?void 0:k.chatskip2content)===1||((nt=_ge("b_skip_to_content"))===null||nt===void 0?void 0:nt.setAttribute("tabindex","0"))),r=_ge("b-scopeListItem-conv"),r&&r.children.length>0&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active")),y=_ge("b_phead_chat"),y&&Lib.CssClass.contains(y,"b_active")&&Lib.CssClass.remove(y,"b_active")),_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],o&&(tt=n&&n.length>1?n[1]:!1,tt&&SydFSCHelper.LogIntEvent("ConversationViewExit","Conversation",{source:"BackButton"}),tt||SydFSCHelper.pushSydHistory(!1))),!o&&ut&&SydFSCHelper.updateConvFlagInURL(!1),SydFSCHelper.updateConvPageTitle(!1),_G[SydFSCHelper.SYD_MODE]="serp",st){if(u=_ge("b_pole"),!u){for(u=sj_ce("div","b_pole"),e=_d.querySelector("main"),t=_ge("b_results");t&&e&&t.parentElement!=e;)t=t.parentElement;e&&t&&e.insertBefore(u,t)}SydFSCHelper.addCarousel(u)}else if(ei&&(l=CIB.vm.conversation.model.messages.filter(function(n){return n.type==="meta"&&n.text!="Generating answers for you..."||n.type==="text"&&n.author==="user"}),l&&l.length>0)){var p=l[l.length-1].text.split("`"),w=p.length==1?p[0]:p.length==3?p[1]:"",it=_ge("sb_form_go"),rt=_ge("sb_form_q");_w.sj_isAjax&&w&&rt.value.toLowerCase()!=w.toLowerCase()&&it&&(rt.value=w,SydFSCHelper.lastQuery=w,it.click())}f&&sj_evt.fire("switchToWeb");sj_ue(_w,"beforeprint",yr);sj_ue(_w,"afterprint",pr);b=_ge("b_content");b&&Lib.CssClass.contains(b,"b_hide")&&Lib.CssClass.remove(b,"b_hide");ot=!1}});sb_st(function(){or||(sj_evt.bind("showSydFSC",wu,!0),f&&sj_evt.bind("showNotebook",function(){sj_evt.fire("switchToNotebook");pt=__spreadArray([],CIB.config.sydney.request.optionsSets,!0);var n=SydFSCHelper.getAllowedToneOptionsSets(SydFSCHelper.PRECISE_TONE);n=n.filter(function(n){return n!=="autosave"});rr.forEach(function(t){SydFSCHelper.addOptionSet(n,t)});CIB.config.sydney.request.optionsSets=n;CIB.config.messaging.maxMessageLength=fr;CIB.showNotebook&&CIB.showNotebook();console.debug("CIB change to notebook mode");_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE];_G[SydFSCHelper.SYD_MODE]="notebook"},!0))},0);nr&&sj_evt.bind("sydFSCLoaded",eu,!0);sj_evt.bind("onModeChanged",function(n){setTimeout(function(){if(f&&_G[SydFSCHelper.SYD_PREV_MODE]==="notebook"&&n[1]!=="notebook"){CIB.config.sydney.request.optionsSets=__spreadArray([],pt,!0);var t=SydFSCHelper.getAllowedToneOptionsSets(CIB.responseTone);CIB.config.sydney.request.optionsSets=t;CIB.config.messaging.maxMessageLength=ur}},0)});sj_evt.fire("convInit:done")}function ar(){var t;e=((t=_d.getElementsByClassName("b_top"))===null||t===void 0?void 0:t.length)>0?_d.getElementsByClassName("b_top")[0]:null;ni=sj_b.querySelector("#b_sydTigerCont")!=null;ft=!!e&&e.querySelector("#sydwrap_wrapper")!=null;n.moveOnlySydXAnswers&&(i=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat .b_wpt_chat"),i&&(Lib.CssClass.add(i,ri),li=i.querySelector(".b_wpt_creator_content")!=null))}function ou(){var n=_ge("id_hbfo");sj_be(n,"click",function(n){var r=n.target,t,i;_G[SydFSCHelper.SYD_MODE]=="conversation"&&r&&(t=su(r),t&&t.target!="_blank"&&(i="",t.href.indexOf("/profile/")>=0?i="profile":t.href.indexOf("/account/")>=0&&(i="account"),SydFSCHelper.LogIntEvent("ConversationViewExit","Conversation",{source:"ClickMenu",target:i})))})}function su(n){while(n!=null){if(n.tagName=="A"&&Lib.CssClass.contains(n,"hb_section"))return n;n=n.parentElement}return null}function bt(n,t,i){i===void 0&&(i=!1);t&&n&&(i?n.prepend(t):n.appendChild(t))}function hu(n){var u,f,e,o,s,h;if(!kt){bt(_ge("b_sydtoporpole"),n);return}var l=_d.querySelector("cib-serp"),i=(f=(u=_d.querySelector("cib-serp"))===null||u===void 0?void 0:u.shadowRoot)===null||f===void 0?void 0:f.querySelector("cib-conversation"),r=(o=(e=i===null||i===void 0?void 0:i.shadowRoot)===null||e===void 0?void 0:e.querySelector(".scroller"))===null||o===void 0?void 0:o.querySelector(".main cib-welcome-container"),c=(h=(s=i===null||i===void 0?void 0:i.shadowRoot)===null||s===void 0?void 0:s.querySelector(".scroller"))===null||h===void 0?void 0:h.querySelector(".main");i===null||i===void 0?void 0:i.appendChild(p);r?r===null||r===void 0?void 0:r.after(w):c===null||c===void 0?void 0:c.prepend(w);t===null||t===void 0?void 0:t.appendChild(n);gt;bt(l,t);cu()}function cu(){lu();au()}function lu(){var t=_d.querySelector("#sydFirstAnswer .b_wpt_chat"),n=_d.querySelector("#sydFirstAnswer .b_wpt_chat .b_wpt_chat_inner");t&&n&&(t.querySelector("b_wpt_chat_inner > .b_sideBleed")&&(n.style.padding="0 20px 5px 20px"),t.querySelector(".b_wpt_chat_inner > .wtr_core.b_sideBleed, .b_wpt_chat_inner > .b_sideBleed #lMapContainer, .b_wpt_chat_inner > .ji_container, .b_wpt_chat_inner > .b_sideBleed #placeAnswer, .b_wpt_chat_inner > .b_sideBleed .ckt_main, .b_wpt_chat_inner > .b_sideBleed .mit_ans, .b_wpt_chat_inner > .jobsAnswerContainer, .b_wpt_chat_inner > div .sa_main")&&(n.style.padding="unset"),n.querySelector(".b_wpt_creator")&&(n.style.padding="0px"),n.querySelector(".b_wpt_insights")&&(n.style.paddingTop="0px",n.style.paddingBottom="0px"))}function au(){var n=_d.querySelector("#sydFirstAnswer .b_wpt_chat");n&&n.querySelector(".b_wpt_creator")&&(n.style.boxShadow="unset")}function vu(){if(ar(),n.moveOnlySydXAnswers){if(!i||ai&&li)return;(a||ft&&!ni)&&sb_st(function(){hu(i)},iu)}}function vr(){if(n.moveOnlySydXAnswers){if(!i)return;var t=sj_b.querySelector("#sydwrap_wrapper #b_syd_sm_chat");t&&!t.contains(i)&&i&&(Lib.CssClass.remove(i,ri),bt(t,i,!0))}}function yu(){var n=new URLSearchParams(_w.location.search),t=n.get("sendquery");return t==="1"}function pu(){var n=_ge("conv-css-link");n&&!n.classList.contains("css-conv-added")&&(n.setAttribute("rel","stylesheet"),n.setAttribute("class","css-conv-added"))}function wu(n){var w,b,k,tt,it,rt,ft,vt,ot,t,ht,yt,u,v,e,r,i,l,at;if(!et){et=!0;SydFSCHelper.updateResponseToneAfterSerp();vt=SydFSCHelper.getConfigOrDefault((w=_w._sydConvConfig)===null||w===void 0?void 0:w.disableAllChatAds,!1);CIB.config.features.enableAds=!vt;ci&&(ot=CIB.config.sydney.request.optionsSets.indexOf("nocacheread"),ot>=0&&CIB.config.sydney.request.optionsSets.splice(ot,1));bi&&pu();t=_ge("b_header");ht=!1;t&&nt&&Lib.CssClass.contains(t,nt)&&(Lib.CssClass.remove(t,nt),SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ShowConv"}),f&&(yt=new URLSearchParams(window.location.search),ht=yt.get("showntbk")==="1"));t&&!Lib.CssClass.contains(t,"b_bcbSwitch")&&tr&&Lib.CssClass.add(t,"b_bcbSwitch");st&&SydFSCHelper.removeQueries();u=n&&n.length>1?n[1]:null;v=n&&n.length>2?n[2]:null;a=n&&n.length>3?n[3]==tu:!1;var ct=n&&n.length>5?n[5]:null,bt=n&&n.length>6?n[6]:!1,y=n&&n.length>7?n[7]:!1,kt=n&&n.length>8?n[8]:!1;if(s||h||(_w.scrollY>0&&_w.scrollTo(0,0),_d.documentElement&&(Lib.CssClass.add(_d.documentElement,"b_disOvflw"),Lib.CssClass.remove(_d.documentElement,"b_delayOvflw"))),s||(Lib.CssClass.add(sj_b,c),g&&sb_st(function(){if(Lib.CssClass.contains(sj_b,c)){var t=_ge("b_header"),i=_ge("id_h"),n=_d.querySelector(".b_scopebar");ui=n&&n.nextSibling;i&&n&&(t===null||t===void 0?void 0:t.insertBefore(n,i))}},1e3)),SydFSCHelper.shouldMove1TAnswers(d,a,u)&&vu(),u&&SydFSCHelper.sendFirstQuery(kt?u.trim():u.toLowerCase().trim(),v,ct,y||yu()),CIB.showConversation(),bt&&(e=[],ct&&e.push({author:"user",text:ct}),v&&e.push({author:"bot",text:v}),dt&&e.length!=0&&CIB.registerContext(e),CIB.toggleSpeechEnabled(),CIB.triggerMic()),!s&&!h){r=_ge("b-scopeListItem-web");r&&r.children.length>0&&r.parentElement&&(r.children[0].setAttribute("aria-current","false"),Lib.CssClass.remove(r,"b_active"));var p=_ge("b-scopeListItem-conv"),lt=_ge("b_bceBcbToggle"),pt=lt===null||lt===void 0?void 0:lt.querySelector(".selected");if(p&&p.children.length>0&&(p.children[0].setAttribute("aria-current","page"),Lib.CssClass.add(p,"b_active"),((b=_G===null||_G===void 0?void 0:_G.EF)===null||b===void 0?void 0:b.chatskip2content)===1||((k=_ge("b_skip_to_content"))===null||k===void 0?void 0:k.setAttribute("tabindex","-1")),pt&&y&&pt.focus()),i=_d.querySelector(".b_sydConvMode"),l=(ft=(rt=(it=(tt=i===null||i===void 0?void 0:i.querySelector("cib-serp"))===null||tt===void 0?void 0:tt.shadowRoot)===null||it===void 0?void 0:it.querySelector("cib-action-bar"))===null||rt===void 0?void 0:rt.shadowRoot)===null||ft===void 0?void 0:ft.querySelector(".input-container .text-input textarea"),l&&!y&&l.focus(),i&&l&&y){sj_be(i,"keyup",wt);function wt(n){(n.code=="Tab"||n.keyCode==9||n.key=="Tab")&&l.focus();i.removeEventListener("keyup",wt)}}}_G[SydFSCHelper.SYD_PREV_MODE]!=_G[SydFSCHelper.SYD_MODE]&&(_G[SydFSCHelper.SYD_PREV_MODE]=_G[SydFSCHelper.SYD_MODE],o&&(at=n&&n.length>4?n[4]:!1,at&&SydFSCHelper.LogIntEvent("ConversationViewEnter","Conversation",{source:"BackButton"}),at||SydFSCHelper.pushSydHistory(!0)));!o&&ut&&SydFSCHelper.updateConvFlagInURL(!0);SydFSCHelper.updateConvPageTitle(!0);ki||bu();_G[SydFSCHelper.SYD_MODE]="conversation";ht&&sj_evt.fire("switchToNotebook");sj_be(_w,"beforeprint",yr);sj_be(_w,"afterprint",pr);et=!1}}function bu(){var n=ClientObserver.getBrowserWidth(),t=ClientObserver.getBrowserHeight();SydFSCHelper.set2TQueryConfigs(n,t,vi)}function ku(){vt=!0}function du(){vt=!1}function gu(n){var t=0;n||(n=window.event);n.wheelDelta?t=n.wheelDelta/60:n.detail&&(t=-n.detail/2);wr(t,tt)}function nf(n){ht=n.changedTouches[0].clientY;y=n.touches&&n.touches.length>1?!0:!1}function tf(n){var t=n.changedTouches[0].clientY-ht;wr(t,dr,!0)}function rf(n){u=0;b=!1;k=!1;ht=0;y=n.touches&&n.touches.length!==0}function yr(){var n=_ge("b_content");n&&Lib.CssClass.add(_ge("b_content"),"b_hide")}function pr(){var n=_ge("b_content");n&&Lib.CssClass.remove(n,"b_hide")}function wr(n,t,i){var e,r,o;(i===void 0&&(i=!1),Log.Log("ClientInst","Codex","CheckScrollCalled"),vt)||(sb_ct(fi),b||(v=Lib.CssClass.contains(sj_b,c),k=v?uf():_w.scrollY==0),b=!0,k&&(u+=n),i||(fi=sb_st(function(){u=0;b=!1;k=!1},150)),e=!v&&u>it&&_G[SydFSCHelper.SYD_MODE]!="conversation"&&!y,r=rt&&v&&u<-1*it&&_G[SydFSCHelper.SYD_MODE]=="conversation"&&!y,f&&!r&&(r=rt&&v&&u<-1*it&&_G[SydFSCHelper.SYD_MODE]=="notebook"&&!y),e?(Log.Log("ClientInst","Codex","ScrollToChat"),!at&&u>t&&(hr?SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ChatBubble"}):SydFSCHelper.LogIntEvent("ConversationViewEnter","Scope",{source:"ScrollUp"}),SydFSCHelper.triggerSydFSCQueryWithContext())):r&&(Log.Log("ClientInst","Codex","ScrollOutChat"),o=f&&_G[SydFSCHelper.SYD_MODE]==="notebook",!at&&!o&&u<-1*t&&(SydFSCHelper.LogIntEvent("ConversationViewExit","Scope",{source:"ScrollDown",target:_G[SydFSCHelper.SYD_PREV_MODE]}),sj_evt.fire("hideSydFSC"),sb_st(function(){_w.scrollTo(0,0)},1))))}function uf(){return!l?!1:Math.abs(l.scrollTop-(l.scrollHeight-l.offsetHeight))<1}function ff(){var t,i,r,e=_ge("b_sydOvrClose"),n,u,f;e&&sj_be(e,"click",function(){sj_evt.fire("hideSydFSC")});n=(r=(i=(t=_d.querySelector("#b_sydConvCont cib-serp"))===null||t===void 0?void 0:t.shadowRoot)===null||i===void 0?void 0:i.querySelector("cib-action-bar"))===null||r===void 0?void 0:r.shadowRoot;u=n===null||n===void 0?void 0:n.querySelector(".outside-left-container");u&&(u.style.display="none");oi&&n&&(f=sj_ce("style"),f.textContent="\n                .control.microphone {\n                    display: none;\n                }\n            ",n.appendChild(f))}function ef(n,t){var i,r;n===void 0&&(n=null);t===void 0&&(t=tt);r=(i=_w._sydPayWallConfig)===null||i===void 0?void 0:i.loadSydneyConvResWithPayWall;r?sj_evt.bind("waitlistUpdate:eligible",cr,!0):void cr(n);tt=t}function sf(n){CIB.loadConversation(n);SydFSCHelper.lastQuery=SydFSCHelper.getQuery().toLowerCase().trim()}var c="b_sydConvMode",nt="b_sydShowConv",br="b_sydConvCont",kr="b_ctf",tt=10,it=10,dr=100,gr=2e3,nu=2e3,kt,rt,dt,o,ut,gt=!1,e,ft,i=null,ni=!1,r,ti,ii,l,t,p,w,tu="SYDX_WRAPPER",a=!1,ri="b_sydxwrappedanswer",iu=1e3,et=!1,ot=!1,ui=null,u=0,fi,b=!1,k=!1,v=!1,ru=!1,d=!1,ei=!1,st=!1,s=!1,h=!1,ht;n.moveOnlySydXAnswers=!1;var oi=!1,si=!1,hi=!1,uu=!1,ci=!1,li=!1,ai=!1,vi=!1,ct=!1,lt=!1,at=!1,yi=!1,vt=!1,yt=!1,pi=!1,wi="",y=!1,bi,ki=!1,di=!1,gi=!1,nr=!1,tr=!1,f=!1,pt,ir="",rr=[],ur,fr,er=!1,g=!1,or=!1,wt="",sr=!1,hr=!1,fu=!1;(typeof sj_b=="undefined"||sj_b==null)&&(window.sj_b=document.body);n.init1TAnswerContents=ar;n.initWithWaitlistUpdate=ef;sj_evt.fire("sydFSC.init")})(SydneyFullScreenConv||(SydneyFullScreenConv={}))